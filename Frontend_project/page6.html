<html>
  <head>
    <script src="https://d3js.org/d3.v4.js"></script>
    <style>
    body {
        font-family: Arial;
    }
        
    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: lightblue; 
    }

    li {
      float: left;

    }

    li a {
      display: block;
      color: black;
      text-align: center;
      padding: 6px 40px;
      text-decoration: none;
      font-size: 16px;
    }

    * {
      box-sizing: border-box;
    }

    .box {
      float: left;
      width: 50%;
      padding: 20px;

    }
    .center {
      margin: auto;
    }


    .clearfix::after {
      content: "";
      clear: both;
      display: table;
    }
    </style>

    
  </head>
  <body>
    <ul>
      <li><a>Lokalizacja:   A</a></li>
      <li><a>Pyły PM2.5:    165</a></li>
      <li><a>Temperatura:   15°C</a></li>
      <li><a>Wilgotność:    35%</a></li>
      <li><a>Tlenek Węgla:  0</a></li>
      <li><a>Wibracje:  0</a></li>
    </ul>
    <ul>
      <li><a>Lokalizacja:   B</a></li>
      <li><a>Pyły PM2.5:    135</a></li>
      <li><a>Temperatura:   19°C</a></li>
      <li><a>Wilgotność:    45%</a></li>
      <li><a>Tlenek Węgla:  0</a></li>
      <li><a>Wibracje:  4</a></li>
    </ul>
      
    <div class="clearfix" style= "float: left; ">
    <div id="curve_chart1"  class="box" style="width: 800px; height: 500px"></div>  
    <script>

      // set the dimensions and margins of the graph
      var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 710 - margin.left - margin.right,
          height = 460 - margin.top - margin.bottom;
      
      // append the svg object to the body of the page
      var svg = d3.select("#curve_chart1")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

      svg.append("text")             
        .attr("transform", "translate(" + (width/2) + " ," +  (height + margin.top + 20) + ")")
        .style("text-anchor", "middle")
        .text("Data");


      svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0 - margin.left)
        .attr("x",0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Temperatura [°C]"); 
  
      var  dta =   
      [
      {date:0, value: 24.12 },
{date:1, value: 24.185 },
{date:2, value: 24.060000000000002 },
{date:3, value: 24.105 },
{date:4, value: 24.16 },
{date:5, value: 24.225 },
{date:6, value: 24.33 },
{date:7, value: 24.205000000000002 },
{date:8, value: 24.38 },
{date:9, value: 24.225 },
{date:10, value: 24.45 },
{date:11, value: 24.455 },
{date:12, value: 24.5 },
{date:13, value: 24.445 },
{date:14, value: 24.42 },
{date:15, value: 24.525 },
{date:16, value: 24.549999999999997 },
{date:17, value: 24.535 },
{date:18, value: 24.529999999999998 },
{date:19, value: 24.495 },
{date:20, value: 24.66 },
{date:21, value: 24.645 },
{date:22, value: 24.55 },
{date:23, value: 24.654999999999998 },
{date:24, value: 24.62 },
{date:25, value: 24.755 },
{date:26, value: 24.74 },
{date:27, value: 24.775000000000002 },
{date:28, value: 24.849999999999998 },
{date:29, value: 24.875 },
{date:30, value: 24.85 },
{date:31, value: 24.945 },
{date:32, value: 24.82 },
{date:33, value: 24.995 },
{date:34, value: 24.87 },
{date:35, value: 24.975 },
{date:36, value: 25.06 },
{date:37, value: 25.095000000000002 },
{date:38, value: 24.98 },
{date:39, value: 24.995 },
{date:40, value: 25.15 },
{date:41, value: 25.044999999999998 },
{date:42, value: 25.2 },
{date:43, value: 25.265 },
{date:44, value: 25.12 },
{date:45, value: 25.125 },
{date:46, value: 25.24 },
{date:47, value: 25.355 },
{date:48, value: 25.22 },
{date:49, value: 25.395000000000003 },
{date:50, value: 25.31 },
{date:51, value: 25.314999999999998 },
{date:52, value: 25.490000000000002 },
{date:53, value: 25.495 },
{date:54, value: 25.470000000000002 },
{date:55, value: 25.405 },
{date:56, value: 25.57 },
{date:57, value: 25.565 },
{date:58, value: 25.46 },
{date:59, value: 25.545 },
{date:60, value: 25.55 },
{date:61, value: 25.525 },
{date:62, value: 25.75 },
{date:63, value: 25.645 },
{date:64, value: 25.720000000000002 },
{date:65, value: 25.825 },
{date:66, value: 25.849999999999998 },
{date:67, value: 25.785 },
{date:68, value: 25.79 },
{date:69, value: 25.895000000000003 },
{date:70, value: 25.83 },
{date:71, value: 25.825 },
{date:72, value: 25.87 },
{date:73, value: 25.835 },
{date:74, value: 26.03 },
{date:75, value: 25.965 },
{date:76, value: 25.979999999999997 },
{date:77, value: 25.925 },
{date:78, value: 25.96 },
{date:79, value: 26.155 },
{date:80, value: 26.07 },
{date:81, value: 26.084999999999997 },
{date:82, value: 26.12 },
{date:83, value: 26.115 },
{date:84, value: 26.12 },
{date:85, value: 26.315 },
{date:86, value: 26.22 },
{date:87, value: 26.345000000000002 },
{date:88, value: 26.34 },
{date:89, value: 26.255000000000003 },
{date:90, value: 26.36 },
{date:91, value: 26.285 },
{date:92, value: 26.43 },
{date:93, value: 26.355 },
{date:94, value: 26.46 },
{date:95, value: 26.415 },
{date:96, value: 26.54 },
{date:97, value: 26.595000000000002 },
{date:98, value: 26.599999999999998 },
{date:99, value: 26.495 },
{date:100, value: 26.7 },
{date:101, value: 26.674999999999997 },
{date:102, value: 26.6 },
{date:103, value: 26.775 },
{date:104, value: 26.62 },
{date:105, value: 26.695 },
{date:106, value: 26.65 },
{date:107, value: 26.705000000000002 },
{date:108, value: 26.759999999999998 },
{date:109, value: 26.775000000000002 },
{date:110, value: 26.95 },
{date:111, value: 26.965 },
{date:112, value: 26.84 },
{date:113, value: 26.995 },
{date:114, value: 26.950000000000003 },
{date:115, value: 27.035 },
{date:116, value: 27.09 },
{date:117, value: 26.965 },
{date:118, value: 26.99 },
{date:119, value: 27.035 },
{date:120, value: 27.19 },
{date:121, value: 27.095 },
{date:122, value: 27.1 },
{date:123, value: 27.235 },
{date:124, value: 27.17 },
{date:125, value: 27.125 },
{date:126, value: 27.229999999999997 },
{date:127, value: 27.225 },
{date:128, value: 27.25 },
{date:129, value: 27.275000000000002 },
{date:130, value: 27.32 },
{date:131, value: 27.424999999999997 },
{date:132, value: 27.490000000000002 },
{date:133, value: 27.515 },
{date:134, value: 27.520000000000003 },
{date:135, value: 27.455 },
{date:136, value: 27.57 },
{date:137, value: 27.515 },
{date:138, value: 27.62 },
{date:139, value: 27.535 },
{date:140, value: 27.54 },
{date:141, value: 27.705 },
{date:142, value: 27.720000000000002 },
{date:143, value: 27.695 },
{date:144, value: 27.700000000000003 },
{date:145, value: 27.685 },
{date:146, value: 27.82 },
{date:147, value: 27.765 },
{date:148, value: 27.83 },
{date:149, value: 27.925 },
{date:150, value: 27.79 },
{date:151, value: 27.955 },
{date:152, value: 27.970000000000002 },
{date:153, value: 27.825 },
{date:154, value: 28.01 },
{date:155, value: 27.995 },
{date:156, value: 27.939999999999998 },
{date:157, value: 27.965 },
{date:158, value: 28.15 },
{date:159, value: 28.095000000000002 },
{date:160, value: 28.08 },
{date:161, value: 28.115000000000002 },
{date:162, value: 28.21 },
{date:163, value: 28.175 },
{date:164, value: 28.270000000000003 },
{date:165, value: 28.175 },
{date:166, value: 28.22 },
{date:167, value: 28.335 },
{date:168, value: 28.279999999999998 },
{date:169, value: 28.345 },
{date:170, value: 28.37 },
{date:171, value: 28.375 },
{date:172, value: 28.37 },
{date:173, value: 28.474999999999998 },
{date:174, value: 28.409999999999997 },
{date:175, value: 28.575 },
{date:176, value: 28.46 },
{date:177, value: 28.435000000000002 },
{date:178, value: 28.599999999999998 },
{date:179, value: 28.674999999999997 },
{date:180, value: 28.68 },
{date:181, value: 28.545 },
{date:182, value: 28.720000000000002 },
{date:183, value: 28.645 },
{date:184, value: 28.689999999999998 },
{date:185, value: 28.675 },
{date:186, value: 28.82 },
{date:187, value: 28.875 },
{date:188, value: 28.89 },
{date:189, value: 28.755000000000003 },
{date:190, value: 28.92 },
{date:191, value: 28.945 },
{date:192, value: 28.810000000000002 },
{date:193, value: 28.835 },
{date:194, value: 28.869999999999997 },
{date:195, value: 28.975 },
{date:196, value: 28.910000000000004 },
{date:197, value: 29.085 },
{date:198, value: 29.099999999999998 },
{date:199, value: 29.104999999999997 }
      ]
          
    function main(data) {
      console.log(data[3].date);
      var x = d3.scaleTime()
        .domain(d3.extent(data, function(d) { return d.date; }))
        .range([ 0, width ]);
      xAxis = svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
  
      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.value; })])
        .range([ height, 0 ]);
      yAxis = svg.append("g")
        .call(d3.axisLeft(y));
  
      // Add a clipPath: everything out of this area won't be drawn.
      var clip = svg.append("defs").append("svg:clipPath")
          .attr("id", "clip")
          .append("svg:rect")
          .attr("width", width )
          .attr("height", height )
          .attr("x", 0)
          .attr("y", 0);
  
      // Add brushing
      var brush = d3.brushX()                   // Add the brush feature using the d3.brush function
          .extent( [ [0,0], [width,height] ] )  // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
          .on("end", updateChart)               // Each time the brush selection changes, trigger the 'updateChart' function
  
      // Create the line variable: where both the line and the brush take place
      var line = svg.append('g')
        .attr("clip-path", "url(#clip)")
  
      // Add the line
      line.append("path")
        .datum(data)
        .attr("class", "line")  // I add the class line to be able to modify this line later on.
        .attr("fill", "none")
        .attr("stroke", "green")
        .attr("stroke-width", 2.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.date) })
          .y(function(d) { return y(d.value) })
          )
  
      // Add the brushing
      line
        .append("g")
          .attr("class", "brush")
          .call(brush);
  
      // A function that set idleTimeOut to null
      var idleTimeout
      function idled() { idleTimeout = null; }
  
      // A function that update the chart for given boundaries
      function updateChart() {
  
        // What are the selected boundaries?
        extent = d3.event.selection
  
        // If no selection, back to initial coordinate. Otherwise, update X axis domain
        if(!extent){
          if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit
          x.domain([ 4,8])
        }else{
          x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])
          line.select(".brush").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done
        }
  
        // Update axis and line position
        xAxis.transition().duration(1000).call(d3.axisBottom(x))
        line
            .select('.line')
            .transition()
            .duration(1000)
            .attr("d", d3.line()
              .x(function(d) { return x(d.date) })
              .y(function(d) { return y(d.value) })
            )
      }
  
      // If user double click, reinitialize the chart
      svg.on("dblclick",function(){
        x.domain(d3.extent(data, function(d) { return d.date; }))
        xAxis.transition().call(d3.axisBottom(x))
        line
          .select('.line')
          .transition()
          .attr("d", d3.line()
            .x(function(d) { return x(d.date) })
            .y(function(d) { return y(d.value) })
        )
      });
  
  }
  main(dta);
  </script>
    <div id="curve_chart2" class="box" style="width: 800px; height: 500px"></div>
    <script>

      // set the dimensions and margins of the graph
      var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 710 - margin.left - margin.right,
          height = 460 - margin.top - margin.bottom;
      
      // append the svg object to the body of the page
      var svg = d3.select("#curve_chart2")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

      svg.append("text")             
        .attr("transform", "translate(" + (width/2) + " ," +  (height + margin.top + 20) + ")")
        .style("text-anchor", "middle")
        .text("Data");


      svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0 - margin.left)
        .attr("x",0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Wilgotność [%]"); 
  
      var  dta =   
      [
      {date:0, value: 30.57 },
{date:1, value: 30.770000000000003 },
{date:2, value: 30.89 },
{date:3, value: 30.48 },
{date:4, value: 31.36 },
{date:5, value: 31.01 },
{date:6, value: 31.26 },
{date:7, value: 31.23 },
{date:8, value: 31.740000000000002 },
{date:9, value: 30.95 },
{date:10, value: 31.37 },
{date:11, value: 31.82 },
{date:12, value: 31.57 },
{date:13, value: 31.6 },
{date:14, value: 31.459999999999997 },
{date:15, value: 32.34 },
{date:16, value: 32.47 },
{date:17, value: 32.06 },
{date:18, value: 32.089999999999996 },
{date:19, value: 32.05 },
{date:20, value: 32.31 },
{date:21, value: 32.28 },
{date:22, value: 32.44 },
{date:23, value: 32.519999999999996 },
{date:24, value: 32.57 },
{date:25, value: 33.32 },
{date:26, value: 32.65 },
{date:27, value: 32.83 },
{date:28, value: 33.129999999999995 },
{date:29, value: 33.06 },
{date:30, value: 33.019999999999996 },
{date:31, value: 34.06 },
{date:32, value: 34.11 },
{date:33, value: 33.43 },
{date:34, value: 33.86 },
{date:35, value: 34.43 },
{date:36, value: 33.69 },
{date:37, value: 34.36 },
{date:38, value: 33.83 },
{date:39, value: 34.04 },
{date:40, value: 34.19 },
{date:41, value: 35.02 },
{date:42, value: 35.09 },
{date:43, value: 35.05 },
{date:44, value: 34.78 },
{date:45, value: 34.86 },
{date:46, value: 34.92 },
{date:47, value: 35.19 },
{date:48, value: 35.24 },
{date:49, value: 35.74 },
{date:50, value: 35.629999999999995 },
{date:51, value: 36.02 },
{date:52, value: 35.75 },
{date:53, value: 35.91 },
{date:54, value: 36.34 },
{date:55, value: 35.67 },
{date:56, value: 36.35 },
{date:57, value: 36.0 },
{date:58, value: 36.68 },
{date:59, value: 36.15 },
{date:60, value: 36.510000000000005 },
{date:61, value: 37.0 },
{date:62, value: 36.72 },
{date:63, value: 37.1 },
{date:64, value: 36.63 },
{date:65, value: 36.739999999999995 },
{date:66, value: 37.14 },
{date:67, value: 36.84 },
{date:68, value: 37.08 },
{date:69, value: 37.660000000000004 },
{date:70, value: 37.629999999999995 },
{date:71, value: 37.32 },
{date:72, value: 38.17 },
{date:73, value: 37.99 },
{date:74, value: 37.42 },
{date:75, value: 37.78 },
{date:76, value: 37.66 },
{date:77, value: 38.550000000000004 },
{date:78, value: 37.949999999999996 },
{date:79, value: 38.04 },
{date:80, value: 39.0 },
{date:81, value: 38.66 },
{date:82, value: 39.19 },
{date:83, value: 39.0 },
{date:84, value: 39.22 },
{date:85, value: 39.44 },
{date:86, value: 39.339999999999996 },
{date:87, value: 39.46 },
{date:88, value: 38.94 },
{date:89, value: 39.72 },
{date:90, value: 39.980000000000004 },
{date:91, value: 39.37 },
{date:92, value: 39.519999999999996 },
{date:93, value: 39.85 },
{date:94, value: 40.05 },
{date:95, value: 39.56 },
{date:96, value: 40.58 },
{date:97, value: 40.480000000000004 },
{date:98, value: 40.28 },
{date:99, value: 40.55 },
{date:100, value: 40.71 },
{date:100, value: 40.79 },
{date:101, value: 40.39 },
{date:102, value: 40.64 },
{date:103, value: 40.06 },
{date:104, value: 39.88 },
{date:105, value: 39.76 },
{date:106, value: 40.33 },
{date:107, value: 39.650000000000006 },
{date:108, value: 39.239999999999995 },
{date:109, value: 40.01 },
{date:110, value: 39.7 },
{date:111, value: 39.03 },
{date:112, value: 39.14 },
{date:113, value: 39.42 },
{date:114, value: 39.2 },
{date:115, value: 38.93 },
{date:116, value: 38.42 },
{date:117, value: 39.25 },
{date:118, value: 38.97 },
{date:119, value: 38.32 },
{date:120, value: 38.22 },
{date:121, value: 38.0 },
{date:122, value: 37.97 },
{date:123, value: 38.209999999999994 },
{date:124, value: 38.52 },
{date:125, value: 38.13 },
{date:126, value: 38.089999999999996 },
{date:127, value: 38.099999999999994 },
{date:128, value: 37.78 },
{date:129, value: 38.08 },
{date:130, value: 37.38 },
{date:131, value: 37.379999999999995 },
{date:132, value: 37.150000000000006 },
{date:133, value: 37.599999999999994 },
{date:134, value: 36.65 },
{date:135, value: 36.95 },
{date:136, value: 36.46 },
{date:137, value: 36.8 },
{date:138, value: 37.019999999999996 },
{date:139, value: 36.160000000000004 },
{date:140, value: 36.74 },
{date:141, value: 36.17 },
{date:142, value: 36.519999999999996 },
{date:143, value: 36.17999999999999 },
{date:144, value: 35.6 },
{date:145, value: 35.84 },
{date:146, value: 35.64 },
{date:147, value: 35.61 },
{date:148, value: 35.790000000000006 },
{date:149, value: 35.620000000000005 },
{date:150, value: 35.42 },
{date:151, value: 35.269999999999996 },
{date:152, value: 35.150000000000006 },
{date:153, value: 35.3 },
{date:154, value: 34.63 },
{date:155, value: 34.62 },
{date:156, value: 34.72 },
{date:157, value: 34.3 },
{date:158, value: 34.709999999999994 },
{date:159, value: 34.35 },
{date:160, value: 34.01 },
{date:161, value: 34.089999999999996 },
{date:162, value: 34.19 },
{date:163, value: 34.459999999999994 },
{date:164, value: 34.36 },
{date:165, value: 33.98 },
{date:166, value: 33.96 },
{date:167, value: 33.58 },
{date:168, value: 33.540000000000006 },
{date:169, value: 34.09 },
{date:170, value: 33.74 },
{date:171, value: 33.199999999999996 },
{date:172, value: 33.599999999999994 },
{date:173, value: 33.629999999999995 },
{date:174, value: 33.07 },
{date:175, value: 33.14 },
{date:176, value: 33.269999999999996 },
{date:177, value: 32.900000000000006 },
{date:178, value: 32.2 },
{date:179, value: 32.32 },
{date:180, value: 32.35 },
{date:181, value: 32.29 },
{date:182, value: 32.53 },
{date:183, value: 32.09 },
{date:184, value: 32.0 },
{date:185, value: 32.48 },
{date:186, value: 31.42 },
{date:187, value: 31.529999999999998 },
{date:188, value: 31.7 },
{date:189, value: 31.840000000000003 },
{date:190, value: 31.22 },
{date:191, value: 31.72 },
{date:192, value: 31.080000000000002 },
{date:193, value: 31.66 },
{date:194, value: 31.480000000000004 },
{date:195, value: 30.740000000000002 },
{date:196, value: 30.43 },
{date:197, value: 31.26 },
{date:198, value: 30.51 },
{date:199, value: 30.58 },
      ]
          
    function main(data) {
      console.log(data[3].date);
      var x = d3.scaleTime()
        .domain(d3.extent(data, function(d) { return d.date; }))
        .range([ 0, width ]);
      xAxis = svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
  
      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.value; })])
        .range([ height, 0 ]);
      yAxis = svg.append("g")
        .call(d3.axisLeft(y));
  
      // Add a clipPath: everything out of this area won't be drawn.
      var clip = svg.append("defs").append("svg:clipPath")
          .attr("id", "clip")
          .append("svg:rect")
          .attr("width", width )
          .attr("height", height )
          .attr("x", 0)
          .attr("y", 0);
  
      // Add brushing
      var brush = d3.brushX()                   // Add the brush feature using the d3.brush function
          .extent( [ [0,0], [width,height] ] )  // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
          .on("end", updateChart)               // Each time the brush selection changes, trigger the 'updateChart' function
  
      // Create the line variable: where both the line and the brush take place
      var line = svg.append('g')
        .attr("clip-path", "url(#clip)")
  
      // Add the line
      line.append("path")
        .datum(data)
        .attr("class", "line")  // I add the class line to be able to modify this line later on.
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 2.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.date) })
          .y(function(d) { return y(d.value) })
          )
  
      // Add the brushing
      line
        .append("g")
          .attr("class", "brush")
          .call(brush);
  
      // A function that set idleTimeOut to null
      var idleTimeout
      function idled() { idleTimeout = null; }
  
      // A function that update the chart for given boundaries
      function updateChart() {
  
        // What are the selected boundaries?
        extent = d3.event.selection
  
        // If no selection, back to initial coordinate. Otherwise, update X axis domain
        if(!extent){
          if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit
          x.domain([ 4,8])
        }else{
          x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])
          line.select(".brush").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done
        }
  
        // Update axis and line position
        xAxis.transition().duration(1000).call(d3.axisBottom(x))
        line
            .select('.line')
            .transition()
            .duration(1000)
            .attr("d", d3.line()
              .x(function(d) { return x(d.date) })
              .y(function(d) { return y(d.value) })
            )
      }
  
      // If user double click, reinitialize the chart
      svg.on("dblclick",function(){
        x.domain(d3.extent(data, function(d) { return d.date; }))
        xAxis.transition().call(d3.axisBottom(x))
        line
          .select('.line')
          .transition()
          .attr("d", d3.line()
            .x(function(d) { return x(d.date) })
            .y(function(d) { return y(d.value) })
        )
      });
  
  }
  main(dta);
  </script>
    </div>
    <div class="clearfix" style= "float: left; "> 
    <div id="curve_chart3"  class="box" style="width: 800px; height: 500px"></div>
    <script>

      // set the dimensions and margins of the graph
      var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 710 - margin.left - margin.right,
          height = 460 - margin.top - margin.bottom;
      
      // append the svg object to the body of the page
      var svg = d3.select("#curve_chart3")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        svg.append("text")             
        .attr("transform", "translate(" + (width/2) + " ," +  (height + margin.top + 20) + ")")
        .style("text-anchor", "middle")
        .text("Data");


      svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0 - margin.left)
        .attr("x",0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Pyły PM2.5 [ppm]"); 
  
      var  dta =   
      [
      {date:1, value: 0.05 },
  {date:2, value: 0.16 },
  {date:3, value: 0.1 },
  {date:4, value: 0.43 },
  {date:5, value: 0.16 },
  {date:6, value: 0.42 },
  {date:7, value: 0.38 },
  {date:8, value: 0.35 },
  {date:9, value: 0.21 },
  {date:10, value: 0.52 },
  {date:11, value: 0.54 },
  {date:12, value: 0.64 },
  {date:13, value: 0.53 },
  {date:14, value: 0.41000000000000003 },
  {date:15, value: 0.55 },
  {date:16, value: 0.51 },
  {date:17, value: 0.72 },
  {date:18, value: 0.42 },
  {date:19, value: 0.71 },
  {date:20, value: 0.62 },
  {date:21, value: 0.59 },
  {date:22, value: 0.8200000000000001 },
  {date:23, value: 0.72 },
  {date:24, value: 0.8 },
  {date:25, value: 0.7 },
  {date:26, value: 0.8400000000000001 },
  {date:27, value: 0.9 },
  {date:28, value: 0.6900000000000001 },
  {date:29, value: 0.61 },
  {date:30, value: 0.71 },
  {date:31, value: 0.88 },
  {date:32, value: 0.81 },
  {date:33, value: 0.74 },
  {date:34, value: 0.79 },
  {date:35, value: 1.02 },
  {date:36, value: 0.72 },
  {date:37, value: 1.12 },
  {date:38, value: 0.85 },
  {date:39, value: 1.1800000000000002 },
  {date:40, value: 0.9700000000000001 },
  {date:41, value: 1.19 },
  {date:42, value: 0.87 },
  {date:43, value: 0.97 },
  {date:44, value: 1.22 },
  {date:45, value: 1.26 },
  {date:46, value: 1.17 },
  {date:47, value: 1.0699999999999998 },
  {date:48, value: 1.1099999999999999 },
  {date:49, value: 1.19 },
  {date:50, value: 1.3900000000000001 },
  {date:51, value: 1.49 },
  {date:52, value: 1.19 },
  {date:114, value: 1.03 },
  {date:115, value: 1.02 },
  {date:116, value: 0.8699999999999999 },
  {date:117, value: 0.8999999999999999 },
  {date:118, value: 0.8899999999999999 },
  {date:119, value: 0.9300000000000002 },
  {date:120, value: 0.8400000000000001 },
  {date:121, value: 0.8599999999999999 },
  {date:122, value: 0.9299999999999999 },
  {date:123, value: 0.8799999999999999 },
  {date:124, value: 0.9299999999999999 },
  {date:125, value: 0.8399999999999999 },
  {date:126, value: 0.8800000000000001 },
  {date:127, value: 0.8999999999999999 },
  {date:128, value: 0.8099999999999998 },
  {date:129, value: 0.8700000000000001 },
  {date:130, value: 0.8099999999999998 },
  {date:131, value: 0.8300000000000001 },
  {date:132, value: 0.8 },
  {date:133, value: 0.8399999999999999 },
  {date:134, value: 0.74 },
  {date:135, value: 0.79 },
  {date:136, value: 0.72 },
  {date:137, value: 0.81 },
  {date:138, value: 0.6299999999999999 },
  {date:139, value: 0.6100000000000001 },
  {date:140, value: 0.75 },
  {date:141, value: 0.7300000000000002 },
  {date:142, value: 0.6200000000000001 },
  {date:143, value: 0.6900000000000002 },
  {date:144, value: 0.7200000000000002 },
  {date:145, value: 0.7300000000000002 },
  {date:146, value: 0.73 },
  {date:147, value: 0.6399999999999999 },
  {date:148, value: 0.56 },
  {date:149, value: 0.5199999999999998 },
  {date:150, value: 0.5499999999999998 },
  {date:151, value: 0.6799999999999999 },
  {date:152, value: 0.6299999999999999 },
  {date:153, value: 0.49 },
  {date:154, value: 0.5099999999999998 },
  {date:155, value: 0.47 },
  {date:156, value: 0.5899999999999999 },
  {date:157, value: 0.42999999999999994 },
  {date:158, value: 0.48999999999999977 },
  {date:159, value: 0.42999999999999994 },
  {date:160, value: 0.44999999999999973 },
  {date:161, value: 0.5399999999999998 },
  {date:162, value: 0.54 },
  {date:163, value: 0.56 },
  {date:164, value: 0.5200000000000002 },
  {date:165, value: 0.4900000000000002 },
  {date:166, value: 0.3699999999999999 },
  {date:167, value: 0.3700000000000001 },
  {date:168, value: 0.4600000000000002 },
  {date:169, value: 0.41000000000000014 },
  {date:170, value: 0.4600000000000002 },
  {date:171, value: 0.3799999999999999 },
  {date:172, value: 0.44999999999999996 },
  {date:173, value: 0.3799999999999999 },
  {date:174, value: 0.28 },
  {date:175, value: 0.3799999999999999 },
  {date:176, value: 0.2899999999999998 },
  {date:177, value: 0.33999999999999986 },
  {date:178, value: 0.22999999999999976 },
  {date:179, value: 0.3799999999999999 },
  {date:180, value: 0.3899999999999999 },
  {date:181, value: 0.2999999999999998 },
  {date:182, value: 0.17999999999999994 },
  {date:183, value: 0.29000000000000004 },
  {date:184, value: 0.24 },
  {date:185, value: 0.27 },
  {date:186, value: 0.30000000000000004 },
  {date:187, value: 0.21999999999999975 },
  {date:188, value: 0.18999999999999995 },
  {date:189, value: 0.27000000000000024 },
  {date:190, value: 0.18000000000000016 },
  {date:191, value: 0.2100000000000002 },
  {date:192, value: 0.1499999999999999 },
  {date:193, value: 0.19999999999999996 },
  {date:194, value: 0.06999999999999984 },
  {date:195, value: 0.2100000000000002 },
  {date:196, value: 0.20999999999999996 },
  {date:197, value: 0.1100000000000001 },
  {date:198, value: 0.04999999999999982 },
  {date:199, value: 0.050000000000000044 },
      ]
          
    function main(data) {
      console.log(data[3].date);
      var x = d3.scaleTime()
        .domain(d3.extent(data, function(d) { return d.date; }))
        .range([ 0, width ]);
      xAxis = svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
  
      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.value; })])
        .range([ height, 0 ]);
      yAxis = svg.append("g")
        .call(d3.axisLeft(y));
  
      // Add a clipPath: everything out of this area won't be drawn.
      var clip = svg.append("defs").append("svg:clipPath")
          .attr("id", "clip")
          .append("svg:rect")
          .attr("width", width )
          .attr("height", height )
          .attr("x", 0)
          .attr("y", 0);
  
      // Add brushing
      var brush = d3.brushX()                   // Add the brush feature using the d3.brush function
          .extent( [ [0,0], [width,height] ] )  // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
          .on("end", updateChart)               // Each time the brush selection changes, trigger the 'updateChart' function
  
      // Create the line variable: where both the line and the brush take place
      var line = svg.append('g')
        .attr("clip-path", "url(#clip)")
  
      // Add the line
      line.append("path")
        .datum(data)
        .attr("class", "line")  // I add the class line to be able to modify this line later on.
        .attr("fill", "none")
        .attr("stroke", "red")
        .attr("stroke-width", 2.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.date) })
          .y(function(d) { return y(d.value) })
          )
  
      // Add the brushing
      line
        .append("g")
          .attr("class", "brush")
          .call(brush);
  
      // A function that set idleTimeOut to null
      var idleTimeout
      function idled() { idleTimeout = null; }
  
      // A function that update the chart for given boundaries
      function updateChart() {
  
        // What are the selected boundaries?
        extent = d3.event.selection
  
        // If no selection, back to initial coordinate. Otherwise, update X axis domain
        if(!extent){
          if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit
          x.domain([ 4,8])
        }else{
          x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])
          line.select(".brush").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done
        }
  
        // Update axis and line position
        xAxis.transition().duration(1000).call(d3.axisBottom(x))
        line
            .select('.line')
            .transition()
            .duration(1000)
            .attr("d", d3.line()
              .x(function(d) { return x(d.date) })
              .y(function(d) { return y(d.value) })
            )
      }
  
      // If user double click, reinitialize the chart
      svg.on("dblclick",function(){
        x.domain(d3.extent(data, function(d) { return d.date; }))
        xAxis.transition().call(d3.axisBottom(x))
        line
          .select('.line')
          .transition()
          .attr("d", d3.line()
            .x(function(d) { return x(d.date) })
            .y(function(d) { return y(d.value) })
        )
      });
  
  }
  main(dta);
  </script>
    <div id="curve_chart4"  class="box" style="width: 800px; height: 500px"></div>
    <script>

      // set the dimensions and margins of the graph
      var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 710 - margin.left - margin.right,
          height = 460 - margin.top - margin.bottom;
      
      // append the svg object to the body of the page
      var svg = d3.select("#curve_chart4")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        svg.append("text")             
        .attr("transform", "translate(" + (width/2) + " ," +  (height + margin.top + 20) + ")")
        .style("text-anchor", "middle")
        .text("Data");


      svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0 - margin.left)
        .attr("x",0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Tlenek węgla [ppm]");  
  
      var  dta =   
      [
      {date:0, value: 0},
{date:1, value: 0},
{date:2, value: 0},
{date:3, value: 0},
{date:4, value: 0},
{date:5, value: 0},
{date:6, value: 0},
{date:7, value: 0},
{date:8, value: 0},
{date:9, value: 0},
{date:10, value: 0},
{date:11, value: 0},
{date:12, value: 0},
{date:13, value: 0},
{date:14, value: 0},
{date:15, value: 0},
{date:16, value: 0},
{date:17, value: 0},
{date:18, value: 0},
{date:19, value: 0},
{date:20, value: 0},
{date:21, value: 0},
{date:22, value: 0},
{date:23, value: 0},
{date:24, value: 0},
{date:25, value: 0},
{date:26, value: 0},
{date:27, value: 0},
{date:28, value: 0},
{date:29, value: 0},
{date:30, value: 0},
{date:31, value: 0},
{date:32, value: 0},
{date:33, value: 0},
{date:34, value: 0},
{date:35, value: 0},
{date:36, value: 0},
{date:37, value: 0},
{date:38, value: 0},
{date:39, value: 0},
{date:40, value: 0},
{date:41, value: 0},
{date:42, value: 0},
{date:43, value: 0},
{date:44, value: 0},
{date:45, value: 0},
{date:46, value: 0},
{date:47, value: 0},
{date:48, value: 0},
{date:49, value: 0},
{date:50, value: 0},
{date:51, value: 0},
{date:52, value: 0},
{date:53, value: 0},
{date:54, value: 0},
{date:55, value: 0},
{date:56, value: 0},
{date:57, value: 0},
{date:58, value: 0},
{date:59, value: 0},
{date:60, value: 0},
{date:61, value: 0},
{date:62, value: 0},
{date:63, value: 0},
{date:64, value: 0},
{date:65, value: 0},
{date:66, value: 0},
{date:67, value: 0},
{date:68, value: 0},
{date:69, value: 0},
{date:70, value: 0},
{date:71, value: 0},
{date:72, value: 0},
{date:73, value: 0},
{date:74, value: 0},
{date:75, value: 0},
{date:76, value: 0},
{date:77, value: 0},
{date:78, value: 0},
{date:79, value: 0},
{date:80, value: 0},
{date:81, value: 0},
{date:82, value: 0},
{date:83, value: 0},
{date:84, value: 0},
{date:85, value: 0},
{date:86, value: 0},
{date:87, value: 0},
{date:88, value: 0},
{date:89, value: 0},
{date:90, value: 0},
{date:91, value: 0},
{date:92, value: 0},
{date:93, value: 0},
{date:94, value: 0},
{date:95, value: 0},
{date:96, value: 0},
{date:97, value: 0},
{date:98, value: 0},
{date:99, value: 0},
{date:100, value: 0},
{date:101, value: 0},
{date:102, value: 0},
{date:103, value: 0},
{date:104, value: 0},
{date:105, value: 0},
{date:106, value: 0},
{date:107, value: 0},
{date:108, value: 0},
{date:109, value: 0},
{date:110, value: 0},
{date:111, value: 0},
{date:112, value: 0},
{date:113, value: 0},
{date:114, value: 0},
{date:115, value: 0},
{date:116, value: 0},
{date:117, value: 0},
{date:118, value: 0},
{date:119, value: 0},
{date:120, value: 0},
{date:121, value: 0},
{date:122, value: 0},
{date:123, value: 0},
{date:124, value: 0},
{date:125, value: 0},
{date:126, value: 0},
{date:127, value: 0},
{date:128, value: 0},
{date:129, value: 0},
{date:130, value: 0},
{date:131, value: 0},
{date:132, value: 0},
{date:133, value: 0},
{date:134, value: 0},
{date:135, value: 0},
{date:136, value: 0},
{date:137, value: 0},
{date:138, value: 0},
{date:139, value: 0},
{date:140, value: 0},
{date:141, value: 0},
{date:142, value: 0},
{date:143, value: 0},
{date:144, value: 0},
{date:145, value: 0},
{date:146, value: 0},
{date:147, value: 0},
{date:148, value: 0},
{date:149, value: 0},
{date:150, value: 0},
  {date:151, value: 0.6799999999999999 },
  {date:152, value: 0.6299999999999999 },
  {date:153, value: 0.49 },
  {date:154, value: 0.5099999999999998 },
  {date:155, value: 0.47 },
  {date:156, value: 0.5899999999999999 },
  {date:157, value: 0.42999999999999994 },
  {date:158, value: 0.48999999999999977 },
  {date:159, value: 0.42999999999999994 },
  {date:160, value: 0.44999999999999973 },
  {date:161, value: 0.5399999999999998 },
  {date:162, value: 0.54 },
  {date:163, value: 0.56 },
  {date:164, value: 0.5200000000000002 },
  {date:165, value: 0.9900000000000002 },
  {date:166, value: 1.3699999999999999 },
  {date:167, value: 1.3700000000000001 },
  {date:168, value: 1.4600000000000002 },
  {date:169, value: 1.41000000000000014 },
  {date:170, value: 2.4600000000000002 },
  {date:171, value: 2.3799999999999999 },
  {date:172, value: 3.44999999999999996 },
  {date:173, value: 4.3799999999999999 },
  {date:174, value: 8.28 },
  {date:175, value: 11.3799999999999999 },
  {date:176, value: 16.2899999999999998 },
  {date:177, value: 28.33999999999999986 },
  {date:178, value: 40.22999999999999976 },
  {date:179, value: 50.3799999999999999 },
  {date:180, value: 30.3899999999999999 },
  {date:181, value: 10.2999999999999998 },
  {date:182, value: 5.17999999999999994 },
  {date:183, value: 3.29000000000000004 },
  {date:184, value: 2.24 },
  {date:185, value: 2.27 },
  {date:186, value: 1.30000000000000004 },
  {date:187, value: 1.21999999999999975 },
  {date:188, value: 1.18999999999999995 },
  {date:189, value: 1.27000000000000024 },
  {date:190, value: 1.18000000000000016 },
  {date:191, value: 1.2100000000000002 },
  {date:192, value: 0.8499999999999999 },
  {date:193, value: 0.89999999999999996 },
  {date:194, value: 0.86999999999999984 },
  {date:195, value: 0.8100000000000002 },
  {date:196, value: 0.60999999999999996 },
  {date:197, value: 0.1100000000000001 },
  {date:198, value: 0.04999999999999982 },
  {date:199, value: 0.050000000000000044 },
      ]
          
    function main(data) {
      console.log(data[3].date);
      var x = d3.scaleTime()
        .domain(d3.extent(data, function(d) { return d.date; }))
        .range([ 0, width ]);
      xAxis = svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
  
      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.value; })])
        .range([ height, 0 ]);
      yAxis = svg.append("g")
        .call(d3.axisLeft(y));
  
      // Add a clipPath: everything out of this area won't be drawn.
      var clip = svg.append("defs").append("svg:clipPath")
          .attr("id", "clip")
          .append("svg:rect")
          .attr("width", width )
          .attr("height", height )
          .attr("x", 0)
          .attr("y", 0);
  
      // Add brushing
      var brush = d3.brushX()                   // Add the brush feature using the d3.brush function
          .extent( [ [0,0], [width,height] ] )  // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
          .on("end", updateChart)               // Each time the brush selection changes, trigger the 'updateChart' function
  
      // Create the line variable: where both the line and the brush take place
      var line = svg.append('g')
        .attr("clip-path", "url(#clip)")
  
      // Add the line
      line.append("path")
        .datum(data)
        .attr("class", "line")  // I add the class line to be able to modify this line later on.
        .attr("fill", "none")
        .attr("stroke", "black")
        .attr("stroke-width", 2.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.date) })
          .y(function(d) { return y(d.value) })
          )
  
      // Add the brushing
      line
        .append("g")
          .attr("class", "brush")
          .call(brush);
  
      // A function that set idleTimeOut to null
      var idleTimeout
      function idled() { idleTimeout = null; }
  
      // A function that update the chart for given boundaries
      function updateChart() {
  
        // What are the selected boundaries?
        extent = d3.event.selection
  
        // If no selection, back to initial coordinate. Otherwise, update X axis domain
        if(!extent){
          if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit
          x.domain([ 4,8])
        }else{
          x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])
          line.select(".brush").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done
        }
  
        // Update axis and line position
        xAxis.transition().duration(1000).call(d3.axisBottom(x))
        line
            .select('.line')
            .transition()
            .duration(1000)
            .attr("d", d3.line()
              .x(function(d) { return x(d.date) })
              .y(function(d) { return y(d.value) })
            )
      }
  
      // If user double click, reinitialize the chart
      svg.on("dblclick",function(){
        x.domain(d3.extent(data, function(d) { return d.date; }))
        xAxis.transition().call(d3.axisBottom(x))
        line
          .select('.line')
          .transition()
          .attr("d", d3.line()
            .x(function(d) { return x(d.date) })
            .y(function(d) { return y(d.value) })
        )
      });
  
  }
  main(dta);
  </script>
    </div>
    <div class="clearfix" style= "float: left; "> 
    <div id="curve_chart5"  class="box" style="width: 800px; height: 500px"></div>
    <script>

      // set the dimensions and margins of the graph
      var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 710 - margin.left - margin.right,
          height = 460 - margin.top - margin.bottom;
      
      // append the svg object to the body of the page
      var svg = d3.select("#curve_chart5")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

      svg.append("text")             
        .attr("transform", "translate(" + (width/2) + " ," +  (height + margin.top + 20) + ")")
        .style("text-anchor", "middle")
        .text("Data");


      svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0 - margin.left)
        .attr("x",0 - (height / 2))
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Wibracje []");     
  
      var  dta =   
      [
      {date:0, value: 3.87 },
{date:1, value: 5.453333333333333 },
{date:2, value: 7.126666666666667 },
{date:3, value: 8.36 },
{date:4, value: 9.083333333333334 },
{date:5, value: 4.246666666666667 },
{date:6, value: 8.219999999999999 },
{date:7, value: 9.343333333333334 },
{date:8, value: 11.096666666666666 },
{date:9, value: 10.0 },
{date:10, value: 13.163333333333334 },
{date:11, value: 5.866666666666667 },
{date:12, value: 5.22 },
{date:13, value: 12.793333333333333 },
{date:14, value: 13.556666666666668 },
{date:15, value: 9.93 },
{date:16, value: 14.363333333333333 },
{date:17, value: 9.786666666666667 },
{date:18, value: 11.58 },
{date:19, value: 6.803333333333333 },
{date:20, value: 11.546666666666667 },
{date:21, value: 9.0 },
{date:22, value: 11.323333333333334 },
{date:23, value: 11.976666666666667 },
{date:24, value: 15.21 },
{date:25, value: 10.613333333333333 },
{date:26, value: 9.906666666666666 },
{date:27, value: 14.68 },
{date:28, value: 14.793333333333333 },
{date:29, value: 13.716666666666665 },
{date:30, value: 15.51 },
{date:31, value: 13.953333333333333 },
{date:32, value: 11.586666666666666 },
{date:33, value: 17.06 },
{date:34, value: 14.913333333333334 },
{date:35, value: 13.626666666666665 },
{date:36, value: 18.07 },
{date:37, value: 12.503333333333334 },
{date:38, value: 21.916666666666664 },
{date:39, value: 18.22 },
{date:40, value: 22.883333333333333 },
{date:41, value: 18.226666666666667 },
{date:42, value: 16.4 },
{date:43, value: 14.373333333333333 },
{date:44, value: 15.406666666666666 },
{date:45, value: 24.58 },
{date:46, value: 22.413333333333334 },
{date:47, value: 17.766666666666666 },
{date:48, value: 22.41 },
{date:49, value: 23.673333333333332 },
{date:50, value: 19.956666666666667 },
{date:51, value: 24.8 },
{date:52, value: 20.183333333333334 },
{date:53, value: 22.576666666666668 },
{date:54, value: 24.93 },
{date:55, value: 26.68333333333333 },
{date:56, value: 25.186666666666667 },
{date:57, value: 23.4 },
{date:58, value: 20.043333333333333 },
{date:59, value: 21.64666666666667 },
{date:60, value: 20.86 },
{date:61, value: 25.243333333333332 },
{date:62, value: 23.92666666666667 },
{date:63, value: 30.57 },
{date:64, value: 25.423333333333332 },
{date:65, value: 25.666666666666668 },
{date:66, value: 23.0 },
{date:67, value: 31.423333333333332 },
{date:68, value: 27.30666666666667 },
{date:69, value: 32.09 },
{date:70, value: 28.973333333333333 },
{date:71, value: 27.486666666666668 },
{date:72, value: 28.39 },
{date:73, value: 27.10333333333333 },
{date:74, value: 31.506666666666668 },
{date:75, value: 32.97 },
{date:76, value: 31.333333333333332 },
{date:77, value: 27.826666666666668 },
{date:78, value: 34.24 },
{date:79, value: 31.89333333333333 },
{date:80, value: 31.64666666666667 },
{date:81, value: 35.5 },
{date:82, value: 32.00333333333333 },
{date:83, value: 36.096666666666664 },
{date:84, value: 34.25 },
{date:85, value: 29.23333333333333 },
{date:86, value: 34.00666666666667 },
{date:87, value: 33.28 },
{date:88, value: 37.67333333333333 },
{date:89, value: 34.72666666666667 },
{date:90, value: 31.9 },
{date:91, value: 37.843333333333334 },
{date:92, value: 31.206666666666667 },
{date:93, value: 36.82 },
{date:94, value: 39.46333333333333 },
{date:95, value: 37.82666666666667 },
{date:96, value: 39.24 },
{date:97, value: 41.74333333333334 },
{date:98, value: 42.47666666666667 },
{date:99, value: 39.24 },
{date:100, value: 40.193333333333335 },
      ]
          
    function main(data) {
      console.log(data[3].date);
      var x = d3.scaleTime()
        .domain(d3.extent(data, function(d) { return d.date; }))
        .range([ 0, width ]);
      xAxis = svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
  
      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.value; })])
        .range([ height, 0 ]);
      yAxis = svg.append("g")
        .call(d3.axisLeft(y));
  
      // Add a clipPath: everything out of this area won't be drawn.
      var clip = svg.append("defs").append("svg:clipPath")
          .attr("id", "clip")
          .append("svg:rect")
          .attr("width", width )
          .attr("height", height )
          .attr("x", 0)
          .attr("y", 0);
  
      // Add brushing
      var brush = d3.brushX()                   // Add the brush feature using the d3.brush function
          .extent( [ [0,0], [width,height] ] )  // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
          .on("end", updateChart)               // Each time the brush selection changes, trigger the 'updateChart' function
  
      // Create the line variable: where both the line and the brush take place
      var line = svg.append('g')
        .attr("clip-path", "url(#clip)")
  
      // Add the line
      line.append("path")
        .datum(data)
        .attr("class", "line")  // I add the class line to be able to modify this line later on.
        .attr("fill", "none")
        .attr("stroke", "purple")
        .attr("stroke-width", 2.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.date) })
          .y(function(d) { return y(d.value) })
          )
  
      // Add the brushing
      line
        .append("g")
          .attr("class", "brush")
          .call(brush);
  
      // A function that set idleTimeOut to null
      var idleTimeout
      function idled() { idleTimeout = null; }
  
      // A function that update the chart for given boundaries
      function updateChart() {
  
        // What are the selected boundaries?
        extent = d3.event.selection
  
        // If no selection, back to initial coordinate. Otherwise, update X axis domain
        if(!extent){
          if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit
          x.domain([ 4,8])
        }else{
          x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])
          line.select(".brush").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done
        }
  
        // Update axis and line position
        xAxis.transition().duration(1000).call(d3.axisBottom(x))
        line
            .select('.line')
            .transition()
            .duration(1000)
            .attr("d", d3.line()
              .x(function(d) { return x(d.date) })
              .y(function(d) { return y(d.value) })
            )
      }
  
      // If user double click, reinitialize the chart
      svg.on("dblclick",function(){
        x.domain(d3.extent(data, function(d) { return d.date; }))
        xAxis.transition().call(d3.axisBottom(x))
        line
          .select('.line')
          .transition()
          .attr("d", d3.line()
            .x(function(d) { return x(d.date) })
            .y(function(d) { return y(d.value) })
        )
      });
  
  }
  main(dta);
  </script>

    </div> 
  </body>
</html>